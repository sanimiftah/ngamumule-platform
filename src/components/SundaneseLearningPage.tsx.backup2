'use client';

import React, { useState } from 'react';
import { 
  BookOpen, 
  Music, 
  MapPin, 
  Users, 
  Clock, 
  Volume2, 
  Play,
  ChevronRight,
  Mountain,
  Heart,
  Star,
  Award,
  Trophy,
  Headphones,
  Camera,
  Download,
  Share2,
  Bookmark,
  Eye,
  Mic,
  Video,
  FileText,
  Calendar,
  Zap,
  CheckCircle,
  Lock,
  PlayCircle,
  Pause,
  SkipForward,
  Target,
  Globe,
  BookmarkPlus,
  MessageCircle,
  PenTool,
  Lightbulb,
  Search,
  Filter,
  Grid,
  List
} from 'lucide-react';
import { sundaneseBasicsLessons, DetailedLesson } from '@/lib/sundanese-basics-lessons';
import { LessonViewer } from './LessonViewer';

interface LearningModule {
  id: string;
  title: string;
  titleSunda: string;
  description: string;
  icon: React.ReactNode;
  progress: number;
  lessons: number;
  difficulty: 'beginner' | 'intermediate' | 'advanced';
  category: 'language' | 'culture' | 'arts' | 'history';
  estimatedTime: string;
  isLocked?: boolean;
  prerequisites?: string[];
}

interface Lesson {
  id: string;
  title: string;
  titleSunda: string;
  duration: string;
  type: 'video' | 'audio' | 'interactive' | 'reading';
  isCompleted: boolean;
  isUnlocked: boolean;
}

interface VocabularyItem {
  sunda: string;
  english: string;
  pronunciation: string;
  example: string;
  audio?: string;
  difficulty: 'beginner' | 'intermediate' | 'advanced';
  category: string;
}

interface MediaItem {
  id: string;
  title: string;
  titleSunda: string;
  type: 'audio' | 'video' | 'podcast';
  duration: string;
  difficulty: string;
  description: string;
  thumbnail?: string;
  category: string;
  plays: number;
}

interface CulturalContent {
  id: string;
  title: string;
  titleSunda: string;
  type: 'instrument' | 'song' | 'story' | 'landmark' | 'tradition';
  description: string;
  audioAvailable: boolean;
  difficulty: string;
  audioSample?: {
    name: string;
    duration: string;
    description: string;
    sampleText?: string; // For songs, includes lyrics or key phrases
    audioFile?: string; // Path to actual audio file
    fallbackText?: string; // Text-to-speech fallback if audio file not available
  };
}

// Module Detail View Component
function ModuleDetailView({ module, lessons, onBack, onLessonSelect }: { 
  module: LearningModule; 
  lessons: Lesson[]; 
  onBack: () => void;
  onLessonSelect: (lesson: DetailedLesson) => void;
}) {
  const [selectedLesson, setSelectedLesson] = useState<string | null>(null);

  // Get detailed lessons for Sundanese Basics module
  const getDetailedLessons = () => {
    if (module.id === 'basics') {
      return sundaneseBasicsLessons.map((detailedLesson, index) => ({
        id: detailedLesson.id,
        title: detailedLesson.title,
        titleSunda: detailedLesson.titleSunda,
        duration: detailedLesson.duration,
        type: detailedLesson.type,
        isCompleted: false, // You can track this in state
        isUnlocked: index === 0 || index <= 2 // First 3 lessons unlocked for demo
      }));
    }
    return lessons;
  };

  const detailedLessons = getDetailedLessons();

  const getTypeIcon = (type: string) => {
    switch (type) {
      case 'video': return <Video className="h-4 w-4" />;
      case 'audio': return <Volume2 className="h-4 w-4" />;
      case 'interactive': return <Zap className="h-4 w-4" />;
      case 'reading': return <BookOpen className="h-4 w-4" />;
      case 'practice': return <Target className="h-4 w-4" />;
      default: return <BookOpen className="h-4 w-4" />;
    }
  };

  const getTypeColor = (type: string) => {
    switch (type) {
      case 'video': return 'bg-sky-100 text-sky-600';
      case 'audio': return 'bg-emerald-100 text-emerald-600';
      case 'interactive': return 'bg-teal-100 text-teal-600';
      case 'reading': return 'bg-slate-100 text-slate-600';
      case 'practice': return 'bg-amber-100 text-amber-600';
      default: return 'bg-gray-100 text-gray-600';
    }
  };

  const handleLessonClick = (lessonId: string) => {
    if (module.id === 'basics') {
      const detailedLesson = sundaneseBasicsLessons.find(l => l.id === lessonId);
      if (detailedLesson) {
        onLessonSelect(detailedLesson);
      }
    }
  };

  return (
    <div className="space-y-6">
      {/* Header */}
      <div className="flex items-center gap-4 mb-6">
        <button 
          onClick={onBack}
          className="p-2 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors"
        >
          <ChevronRight className="h-5 w-5 rotate-180" />
        </button>
        <div className="flex items-center gap-4">
          <div className="p-3 bg-teal-100 rounded-lg">
            {module.icon}
          </div>
          <div>
            <h2 className="text-2xl font-bold text-gray-900">{module.title}</h2>
            <p className="text-teal-600 font-medium">{module.titleSunda}</p>
          </div>
        </div>
      </div>

      {/* Enhanced Module Overview */}
      <div className="bg-gradient-to-r from-slate-600 to-teal-600 rounded-2xl p-8 text-white shadow-xl">
        <div className="grid md:grid-cols-4 gap-6 mb-6">
          <div className="text-center">
            <div className="text-3xl font-bold mb-2">{detailedLessons.length}</div>
            <div className="text-slate-200 text-sm">Total Lessons</div>
          </div>
          <div className="text-center">
            <div className="text-3xl font-bold mb-2">{module.estimatedTime}</div>
            <div className="text-slate-200 text-sm">Est. Duration</div>
          </div>
          <div className="text-center">
            <div className="text-3xl font-bold mb-2">{module.progress}%</div>
            <div className="text-slate-200 text-sm">Completed</div>
          </div>
          <div className="text-center">
            <div className="text-3xl font-bold mb-2">{detailedLessons.filter(l => l.isCompleted).length}</div>
            <div className="text-slate-200 text-sm">Lessons Done</div>
          </div>
        </div>

        <p className="text-slate-100 mb-6 leading-relaxed">{module.description}</p>
        
        {/* Progress Bar */}
        <div className="mb-6">
          <div className="flex justify-between text-sm text-slate-200 mb-2">
            <span>Module Progress</span>
            <span>{module.progress}%</span>
          </div>
          <div className="w-full bg-slate-400 bg-opacity-30 rounded-full h-3">
            <div 
              className="bg-white h-3 rounded-full transition-all duration-300"
              style={{ width: `${module.progress}%` }}
            ></div>
          </div>
        </div>

        {/* Prerequisites */}
        {module.prerequisites && module.prerequisites.length > 0 && (
          <div className="bg-white bg-opacity-10 rounded-lg p-4 backdrop-blur-sm">
            <p className="text-slate-200 text-sm mb-2">Prerequisites completed:</p>
            <div className="flex flex-wrap gap-2">
              {module.prerequisites.map(prereq => (
                <span key={prereq} className="px-3 py-1 bg-emerald-500 bg-opacity-20 border border-emerald-300 text-emerald-100 rounded-lg text-sm">
                  ✓ {prereq}
                </span>
              ))}
            </div>
          </div>
        )}
      </div>

      {/* Detailed Lessons List */}
      <div className="bg-white rounded-xl p-6 shadow-lg">
        <div className="flex items-center justify-between mb-6">
          <h3 className="text-xl font-bold text-gray-900">Lessons</h3>
          {module.id === 'basics' && (
            <span className="px-3 py-1 bg-teal-100 text-teal-700 rounded-lg text-sm font-medium">
              📚 Comprehensive Content Available
            </span>
          )}
        </div>
        
        <div className="space-y-4">
          {detailedLessons.map((lesson, index) => {
            const isDetailedLesson = module.id === 'basics' && sundaneseBasicsLessons.find(l => l.id === lesson.id);
            
            return (
              <div 
                key={lesson.id}
                className={`p-6 rounded-lg border-2 transition-all duration-300 cursor-pointer ${
                  lesson.isUnlocked 
                    ? 'border-gray-200 hover:border-teal-300 hover:shadow-md' 
                    : 'border-gray-100 opacity-50 cursor-not-allowed'
                } ${lesson.isCompleted ? 'bg-emerald-50 border-emerald-200' : 'bg-white'}`}
                onClick={() => lesson.isUnlocked && handleLessonClick(lesson.id)}
              >
                <div className="flex items-center justify-between">
                  <div className="flex items-center gap-4">
                    <div className="flex items-center gap-3">
                      <div className={`w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold ${
                        lesson.isCompleted ? 'bg-emerald-500 text-white' : 
                        lesson.isUnlocked ? 'bg-teal-100 text-teal-600' : 'bg-gray-200 text-gray-400'
                      }`}>
                        {lesson.isCompleted ? <CheckCircle className="h-5 w-5" /> : index + 1}
                      </div>
                      <div className={`p-3 rounded-lg ${getTypeColor(lesson.type)}`}>
                        {getTypeIcon(lesson.type)}
                      </div>
                    </div>
                    <div>
                      <h4 className="font-semibold text-gray-900 mb-1">{lesson.title}</h4>
                      <p className="text-sm text-teal-600 mb-2">{lesson.titleSunda}</p>
                      
                      {/* Enhanced description for detailed lessons */}
                      {isDetailedLesson && (
                        <p className="text-sm text-gray-600 mb-2">
                          {sundaneseBasicsLessons.find(l => l.id === lesson.id)?.description}
                        </p>
                      )}
                      
                      {/* Learning objectives preview */}
                      {isDetailedLesson && (
                        <div className="text-xs text-gray-500">
                          {sundaneseBasicsLessons.find(l => l.id === lesson.id)?.objectives.length} learning objectives
                        </div>
                      )}
                    </div>
                  </div>
                  <div className="flex items-center gap-4">
                    <span className="text-sm text-gray-500 flex items-center gap-1">
                      <Clock className="h-4 w-4" />
                      {lesson.duration}
                    </span>
                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${getTypeColor(lesson.type)}`}>
                      {lesson.type}
                    </span>
                    {lesson.isUnlocked ? (
                      lesson.isCompleted ? (
                        <button className="px-4 py-2 bg-emerald-100 text-emerald-600 rounded-lg hover:bg-emerald-200 transition-colors font-medium">
                          Review
                        </button>
                      ) : (
                        <button className="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors flex items-center gap-2 font-medium">
                          {isDetailedLesson ? 'Study' : 'Start'}
                          <Play className="h-4 w-4" />
                        </button>
                      )
                    ) : (
                      <Lock className="h-5 w-5 text-gray-400" />
                    )}
                  </div>
                </div>

                {/* Expanded lesson preview when selected */}
                {selectedLesson === lesson.id && isDetailedLesson && (
                  <div className="mt-4 pt-4 border-t border-gray-200">
                    <div className="grid md:grid-cols-2 gap-6">
                      <div>
                        <h5 className="font-semibold text-gray-900 mb-2">What you'll learn:</h5>
                        <ul className="text-sm text-gray-600 space-y-1">
                          {sundaneseBasicsLessons.find(l => l.id === lesson.id)?.objectives.slice(0, 3).map((objective, idx) => (
                            <li key={idx} className="flex items-start gap-2">
                              <Target className="h-3 w-3 text-teal-500 mt-1 flex-shrink-0" />
                              {objective}
                            </li>
                          ))}
                        </ul>
                      </div>
                      <div>
                        <h5 className="font-semibold text-gray-900 mb-2">Lesson includes:</h5>
                        <div className="flex flex-wrap gap-2">
                          <span className="px-2 py-1 bg-teal-100 text-teal-700 rounded text-xs">
                            {sundaneseBasicsLessons.find(l => l.id === lesson.id)?.content.vocabulary.length} vocabulary words
                          </span>
                          <span className="px-2 py-1 bg-emerald-100 text-emerald-700 rounded text-xs">
                            {sundaneseBasicsLessons.find(l => l.id === lesson.id)?.content.culturalNotes.length} cultural insights
                          </span>
                          <span className="px-2 py-1 bg-sky-100 text-sky-700 rounded text-xs">
                            {sundaneseBasicsLessons.find(l => l.id === lesson.id)?.content.exercises.length} practice exercises
                          </span>
                          {(sundaneseBasicsLessons.find(l => l.id === lesson.id)?.audioFiles?.length ?? 0) > 0 && (
                            <span className="px-2 py-1 bg-amber-100 text-amber-700 rounded text-xs">
                              Audio included
                            </span>
                          )}
                        </div>
                      </div>
                    </div>
                    <button 
                      onClick={(e) => {
                        e.stopPropagation();
                        const detailedLesson = sundaneseBasicsLessons.find(dl => dl.id === lesson.id);
                        if (detailedLesson) {
                          onLessonSelect(detailedLesson);
                        }
                      }}
                      className="mt-4 w-full py-3 bg-gradient-to-r from-teal-600 to-emerald-600 text-white rounded-lg hover:from-teal-700 hover:to-emerald-700 transition-all font-medium flex items-center justify-center gap-2"
                    >
                      <BookOpen className="h-5 w-5" />
                      Start Complete Lesson
                    </button>
                  </div>
                )}
              </div>
            );
          })}
        </div>

        {/* Module completion message */}
        {module.id === 'basics' && (
          <div className="mt-6 bg-gradient-to-r from-teal-50 to-emerald-50 rounded-lg p-6 border border-teal-200">
            <div className="flex items-center gap-3 mb-3">
              <Award className="h-6 w-6 text-teal-600" />
              <h4 className="font-bold text-gray-900">Complete Learning Experience</h4>
            </div>
            <p className="text-gray-700 mb-4">
              This module features comprehensive lessons with detailed vocabulary, cultural insights, 
              interactive exercises, and audio pronunciation guides. Perfect for building a strong 
              foundation in Sundanese language and culture.
            </p>
            <div className="flex gap-4 text-sm">
              <span className="flex items-center gap-1 text-teal-600">
                <BookOpen className="h-4 w-4" />
                Rich Content
              </span>
              <span className="flex items-center gap-1 text-emerald-600">
                <Volume2 className="h-4 w-4" />
                Audio Guides
              </span>
              <span className="flex items-center gap-1 text-sky-600">
                <Users className="h-4 w-4" />
                Cultural Context
              </span>
              <span className="flex items-center gap-1 text-amber-600">
                <Target className="h-4 w-4" />
                Practice Exercises
              </span>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}

export function SundaneseLearningPage() {
  const [activeTab, setActiveTab] = useState<'overview' | 'modules' | 'culture' | 'media' | 'practice' | 'dictionary'>('overview');
  const [selectedModule, setSelectedModule] = useState<string | null>(null);
  const [selectedLesson, setSelectedLesson] = useState<DetailedLesson | null>(null);
  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');
  const [searchQuery, setSearchQuery] = useState('');
  const [filterCategory, setFilterCategory] = useState<string>('all');
  const [currentlyPlaying, setCurrentlyPlaying] = useState<string | null>(null);
  const [showLessonDetails, setShowLessonDetails] = useState<string | null>(null);
  const [completedLessons, setCompletedLessons] = useState<Set<string>>(new Set());
  const [audioPlayer, setAudioPlayer] = useState<HTMLAudioElement | null>(null);
  const [isAudioLoading, setIsAudioLoading] = useState(false);

  // Real audio player system for Cultural Treasures
  const playRealAudio = (item: CulturalContent) => {
    if (currentlyPlaying === item.id) {
      // Stop current audio
      if (audioPlayer) {
        audioPlayer.pause();
        audioPlayer.currentTime = 0;
      }
      if ('speechSynthesis' in window) {
        window.speechSynthesis.cancel();
      }
      setCurrentlyPlaying(null);
      setAudioPlayer(null);
      return;
    }

    // Stop any previous audio
    if (audioPlayer) {
      audioPlayer.pause();
      audioPlayer.currentTime = 0;
    }
    if ('speechSynthesis' in window) {
      window.speechSynthesis.cancel();
    }

    setCurrentlyPlaying(item.id);
    setIsAudioLoading(true);

    // Try to play real audio file first
    if (item.audioSample?.audioFile) {
      const audio = new Audio(item.audioSample.audioFile);
      
      audio.onloadstart = () => {
        setIsAudioLoading(true);
      };
      
      audio.oncanplay = () => {
        setIsAudioLoading(false);
        setAudioPlayer(audio);
        audio.play().catch(() => {
          // If real audio fails, fall back to text-to-speech
          playTextToSpeechFallback(item);
        });
      };
      
      audio.onended = () => {
        setCurrentlyPlaying(null);
        setAudioPlayer(null);
      };
      
      audio.onerror = () => {
        // Audio file not found or failed to load, use text-to-speech
        setIsAudioLoading(false);
        playTextToSpeechFallback(item);
      };
      
      // Start loading the audio
      audio.load();
    } else {
      // No audio file specified, use text-to-speech directly
      setIsAudioLoading(false);
      playTextToSpeechFallback(item);
    }
  };

  // Fallback text-to-speech system
  const playTextToSpeechFallback = (item: CulturalContent) => {
    if ('speechSynthesis' in window) {
      // Use audio sample text if available, otherwise fall back to title
      const textToSpeak = item.audioSample?.fallbackText || item.audioSample?.sampleText || item.titleSunda;
      const utterance = new SpeechSynthesisUtterance(textToSpeak);
      
      // Try to use Indonesian voice, fallback to default
      const voices = window.speechSynthesis.getVoices();
      const indonesianVoice = voices.find(voice => 
        voice.lang.includes('id') || voice.lang.includes('ID') || 
        voice.name.toLowerCase().includes('indonesia')
      );
      
      if (indonesianVoice) {
        utterance.voice = indonesianVoice;
      }
      
      utterance.lang = 'id-ID'; // Indonesian locale
      
      // Adjust speech settings based on content type
      if (item.type === 'song') {
        utterance.rate = 0.7; // Slower for songs to emphasize melody
        utterance.pitch = 1.2; // Slightly higher pitch for musical content
      } else {
        utterance.rate = 0.8; // Normal learning rate
        utterance.pitch = 1.0;
      }
      
      utterance.onend = () => {
        setCurrentlyPlaying(null);
      };
      
      utterance.onerror = () => {
        setCurrentlyPlaying(null);
        console.log('Audio sample not available');
      };
      
      window.speechSynthesis.speak(utterance);
    } else {
      // Fallback: just reset the playing state
      setTimeout(() => setCurrentlyPlaying(null), 2000);
    }
  };

  const learningModules: LearningModule[] = [
    {
      id: 'basics',
      title: 'Sundanese Basics',
      titleSunda: 'Dasar-dasar Basa Sunda',
      description: 'Learn fundamental Sundanese vocabulary, greetings, and basic conversation',
      icon: <BookOpen className="h-6 w-6" />,
      progress: 75,
      lessons: 12,
      difficulty: 'beginner',
      category: 'language',
      estimatedTime: '3 hours',
      isLocked: false
    },
    {
      id: 'undak-usuk',
      title: 'Speech Levels (Undak Usuk)',
      titleSunda: 'Undak Usuk Basa',
      description: 'Master the respectful speech levels in Sundanese culture',
      icon: <Users className="h-6 w-6" />,
      progress: 45,
      lessons: 8,
      difficulty: 'intermediate',
      category: 'language',
      estimatedTime: '2.5 hours',
      isLocked: false,
      prerequisites: ['basics']
    },
    {
      id: 'sisindiran',
      title: 'Traditional Poetry (Sisindiran)',
      titleSunda: 'Sisindiran Sunda',
      description: 'Explore beautiful Sundanese traditional poetry and riddles',
      icon: <Heart className="h-6 w-6" />,
      progress: 20,
      lessons: 10,
      difficulty: 'intermediate',
      category: 'arts',
      estimatedTime: '4 hours',
      isLocked: false,
      prerequisites: ['basics']
    },
    {
      id: 'pupuh',
      title: 'Classical Poetry (Pupuh)',
      titleSunda: 'Pupuh Sunda',
      description: 'Learn traditional Sundanese poetic forms and their meanings',
      icon: <BookOpen className="h-6 w-6" />,
      progress: 0,
      lessons: 15,
      difficulty: 'advanced',
      category: 'arts',
      estimatedTime: '6 hours',
      isLocked: true,
      prerequisites: ['sisindiran', 'undak-usuk']
    },
    {
      id: 'music',
      title: 'Traditional Music & Instruments',
      titleSunda: 'Musik jeung Alat Musik Tradisional',
      description: 'Discover angklung, kacapi, suling, and other Sundanese instruments',
      icon: <Music className="h-6 w-6" />,
      progress: 30,
      lessons: 18,
      difficulty: 'beginner',
      category: 'arts',
      estimatedTime: '5 hours',
      isLocked: false
    },
    {
      id: 'history',
      title: 'Sundanese History & Landmarks',
      titleSunda: 'Sajarah jeung Tempat Bersejarah Sunda',
      description: 'Explore the rich history of Sunda Kingdom and West Java',
      icon: <MapPin className="h-6 w-6" />,
      progress: 10,
      lessons: 14,
      difficulty: 'intermediate',
      category: 'history',
      estimatedTime: '4.5 hours',
      isLocked: false,
      prerequisites: ['basics']
    }
  ];

  // Sample lessons data for each module
  const sampleLessons: Record<string, Lesson[]> = {
    basics: [
      { id: 'lesson1', title: 'Greetings & Basic Phrases', titleSunda: 'Salametan jeung Ungkapan Dasar', duration: '15 min', type: 'interactive', isCompleted: true, isUnlocked: true },
      { id: 'lesson2', title: 'Family Members', titleSunda: 'Anggota Kulawarga', duration: '12 min', type: 'video', isCompleted: true, isUnlocked: true },
      { id: 'lesson3', title: 'Numbers 1-20', titleSunda: 'Angka 1-20', duration: '10 min', type: 'audio', isCompleted: false, isUnlocked: true },
      { id: 'lesson4', title: 'Days & Time', titleSunda: 'Poé jeung Waktu', duration: '18 min', type: 'interactive', isCompleted: false, isUnlocked: false }
    ],
    'undak-usuk': [
      { id: 'ul1', title: 'Introduction to Speech Levels', titleSunda: 'Bubuka Undak Usuk', duration: '20 min', type: 'video', isCompleted: false, isUnlocked: true },
      { id: 'ul2', title: 'Lemes (Formal Speech)', titleSunda: 'Basa Lemes', duration: '25 min', type: 'interactive', isCompleted: false, isUnlocked: false }
    ]
  };

  // Sample vocabulary data
  const vocabularyItems: VocabularyItem[] = [
    { sunda: 'Wilujeng enjing', english: 'Good morning', pronunciation: 'wi-lu-jeng en-jing', example: 'Wilujeng enjing, Pak!', difficulty: 'beginner', category: 'greetings' },
    { sunda: 'Hatur nuhun', english: 'Thank you', pronunciation: 'ha-tur nu-hun', example: 'Hatur nuhun pisan!', difficulty: 'beginner', category: 'greetings' },
    { sunda: 'Kumaha damang?', english: 'How are you?', pronunciation: 'ku-ma-ha da-mang', example: 'Kumaha damang, Teh?', difficulty: 'beginner', category: 'greetings' },
    { sunda: 'Someah', english: 'Friendly/hospitable', pronunciation: 'so-me-ah', example: 'Urang Sunda téh someah', difficulty: 'intermediate', category: 'culture' }
  ];

  // Sample media items
  const mediaItems: MediaItem[] = [
    { id: 'med1', title: 'Angklung Performance', titleSunda: 'Pagelaran Angklung', type: 'video', duration: '12:30', difficulty: 'beginner', description: 'Traditional bamboo orchestra performance', category: 'music', plays: 1247 },
    { id: 'med2', title: 'Kacapi Suling Ensemble', titleSunda: 'Rampak Kacapi Suling', type: 'audio', duration: '8:45', difficulty: 'intermediate', description: 'Beautiful string and flute music', category: 'music', plays: 856 },
    { id: 'med3', title: 'Sundanese Pronunciation Guide', titleSunda: 'Pituduh Ucapan Sunda', type: 'audio', duration: '25:15', difficulty: 'beginner', description: 'Complete pronunciation tutorial', category: 'language', plays: 2103 }
  ];

  const culturalHighlights: CulturalContent[] = [
    // Traditional Music & Instruments
    {
      id: 'angklung',
      title: 'Angklung',
      titleSunda: 'Angklung',
      type: 'instrument',
      description: 'UNESCO World Heritage bamboo musical instrument played by shaking to create enchanting melodies. Each angklung produces a specific note in pentatonic scale.',
      audioAvailable: true,
      difficulty: 'Beginner',
      audioSample: {
        name: 'Angklung Ensemble Demo',
        duration: '15 seconds',
        description: 'Traditional angklung shaking technique with pentatonic scale demonstration',
        sampleText: 'Gemerincing bambu angklung yang merdu',
        audioFile: '/audio/instruments/angklung-demo.mp3',
        fallbackText: 'Angklung - gemerincing bambu dengan nada pentatonik yang indah'
      }
    },
    {
      id: 'kacapi-suling',
      title: 'Kacapi Suling',
      titleSunda: 'Kacapi Suling',
      type: 'instrument',
      description: 'Traditional string (kacapi) and bamboo flute (suling) ensemble that creates meditative and spiritual music, often accompanying Sundanese poetry.',
      audioAvailable: true,
      difficulty: 'Intermediate',
      audioSample: {
        name: 'Kacapi Suling Meditation',
        duration: '20 seconds',
        description: 'Gentle kacapi plucking with suling melody - peaceful and spiritual',
        sampleText: 'Dentingan kacapi dan tiupan suling yang menenangkan jiwa',
        audioFile: '/audio/instruments/kacapi-suling-demo.mp3',
        fallbackText: 'Kacapi Suling - musik meditasi dengan petikan kacapi dan suling bambu'
      }
    },
    {
      id: 'calung',
      title: 'Calung',
      titleSunda: 'Calung',
      type: 'instrument',
      description: 'Bamboo xylophone with a deeper tone than angklung, played by striking with mallets. Creates rhythmic and melodic foundations.',
      audioAvailable: true,
      difficulty: 'Intermediate',
      audioSample: {
        name: 'Calung Rhythmic Pattern',
        duration: '18 seconds',
        description: 'Deep bamboo xylophone tones with traditional mallet striking technique',
        sampleText: 'Pukulan calung dengan nada bambu yang dalam dan berirama',
        audioFile: '/audio/instruments/calung-demo.mp3',
        fallbackText: 'Calung - silofon bambu dengan pukulan palu yang berirama'
      }
    },
    {
      id: 'karinding',
      title: 'Karinding',
      titleSunda: 'Karinding',
      type: 'instrument',
      description: 'Traditional bamboo jaw harp that produces mystical overtones. Used in spiritual practices and modern experimental music.',
      audioAvailable: true,
      difficulty: 'Advanced',
      audioSample: {
        name: 'Karinding Overtones',
        duration: '12 seconds',
        description: 'Mystical jaw harp vibrations with harmonic overtones',
        sampleText: 'Getaran karinding yang menghasilkan nada-nada gaib',
        audioFile: '/audio/instruments/karinding-demo.mp3',
        fallbackText: 'Karinding - getaran bambu mulut dengan harmoni mistis'
      }
    },
    {
      id: 'arumba',
      title: 'Arumba',
      titleSunda: 'Arumba',
      type: 'instrument',
      description: 'Modern bamboo ensemble (Alunan Rumpun Bambu) that combines traditional and contemporary musical styles.',
      audioAvailable: true,
      difficulty: 'Intermediate',
      audioSample: {
        name: 'Arumba Modern Ensemble',
        duration: '25 seconds',
        description: 'Contemporary bamboo orchestra with modern arrangements',
        sampleText: 'Alunan rumpun bambu dengan aransemen musik modern',
        audioFile: '/audio/instruments/arumba-demo.mp3',
        fallbackText: 'Arumba - ensembel bambu modern dengan aransemen kontemporer'
      }
    },

    // Traditional Songs & Music
    {
      id: 'es-lilin',
      title: 'Es Lilin',
      titleSunda: 'Lagu Es Lilin',
      type: 'song',
      description: 'Beloved children\'s song about ice seller calling through the village streets. Teaches basic Sundanese vocabulary and pronunciation.',
      audioAvailable: true,
      difficulty: 'Beginner',
      audioSample: {
        name: 'Es Lilin Children\'s Song',
        duration: '30 seconds',
        description: 'Traditional children\'s melody with clear pronunciation',
        sampleText: 'Es lilin, es lilin, ngalinglung di jalan, anak-anak pada ngumpul',
        audioFile: '/audio/songs/es-lilin.mp3',
        fallbackText: 'Es lilin, es lilin, ngalinglung di jalan, anak-anak pada ngumpul meungpeung hujan'
      }
    },
    {
      id: 'manuk-dadali',
      title: 'Manuk Dadali',
      titleSunda: 'Manuk Dadali',
      type: 'song',
      description: 'Iconic West Java anthem about the mythical Garuda bird, symbolizing freedom and strength. Official song of West Java province.',
      audioAvailable: true,
      difficulty: 'Intermediate',
      audioSample: {
        name: 'Manuk Dadali Anthem',
        duration: '35 seconds',
        description: 'Majestic provincial anthem with powerful vocals',
        sampleText: 'Manuk dadali, manuk dadali, hiber di angkasa, ngapung luhur jauh di gung-gunung',
        audioFile: '/audio/songs/manuk-dadali.mp3',
        fallbackText: 'Manuk dadali, manuk dadali, hiber di angkasa, ngapung luhur jauh di gung-gunung Sunda'
      }
    },
    {
      id: 'bubuy-bulan',
      title: 'Bubuy Bulan',
      titleSunda: 'Bubuy Bulan',
      type: 'song',
      description: 'Classic love song comparing beloved to the beautiful moon. Features poetic Sundanese language and romantic metaphors.',
      audioAvailable: true,
      difficulty: 'Advanced',
      audioSample: {
        name: 'Bubuy Bulan Love Song',
        duration: '40 seconds',
        description: 'Romantic ballad with gentle melody and poetic lyrics',
        sampleText: 'Bubuy bulan, bubuy bulan, sangray bentang, bulan katembong, panon poe',
        audioFile: '/audio/songs/bubuy-bulan.mp3',
        fallbackText: 'Bubuy bulan, bubuy bulan, sangray bentang, bulan katembong panon poe'
      }
    },
    {
      id: 'tokecang',
      title: 'Tokecang',
      titleSunda: 'Tokecang',
      type: 'song',
      description: 'Traditional work song sung during rice planting season. Demonstrates the connection between music and daily life.',
      audioAvailable: true,
      difficulty: 'Intermediate',
      audioSample: {
        name: 'Tokecang Work Song',
        duration: '28 seconds',
        description: 'Rhythmic work song with communal singing style',
        sampleText: 'Tokecang tokecang, di sawah beuki siang, pada reumeuk lembur',
        audioFile: '/audio/songs/tokecang.mp3',
        fallbackText: 'Tokecang tokecang, di sawah beuki siang, pada reumeuk lembur ka imah'
      }
    },

    // Legends & Stories
    {
      id: 'sangkuriang',
      title: 'Sangkuriang Legend',
      titleSunda: 'Legenda Sangkuriang',
      type: 'story',
      description: 'Epic tale of Sangkuriang who unknowingly fell in love with his mother Dayang Sumbi, creating Tangkuban Perahu mountain in his failed attempt to build a boat.',
      audioAvailable: true,
      difficulty: 'Intermediate'
    },
    {
      id: 'lutung-kasarung',
      title: 'Lutung Kasarung',
      titleSunda: 'Lutung Kasarung',
      type: 'story',
      description: 'Magical story of Purbasari and the enchanted monkey who helps her reclaim her rightful place as princess.',
      audioAvailable: true,
      difficulty: 'Advanced'
    },
    {
      id: 'ciung-wanara',
      title: 'Ciung Wanara',
      titleSunda: 'Ciung Wanara',
      type: 'story',
      description: 'Heroic tale of twin brothers who were raised by a magical bird and later became great kings of Sunda kingdom.',
      audioAvailable: true,
      difficulty: 'Advanced'
    },
    {
      id: 'nyi-loro-kidul',
      title: 'Nyi Loro Kidul',
      titleSunda: 'Nyi Loro Kidul',
      type: 'story',
      description: 'Mystical legend of the Queen of the Southern Seas, protector of Java and powerful supernatural being.',
      audioAvailable: true,
      difficulty: 'Advanced'
    },

    // Traditional Dance & Performance
    {
      id: 'jaipong',
      title: 'Jaipong Dance',
      titleSunda: 'Tari Jaipong',
      type: 'tradition',
      description: 'Dynamic and energetic folk dance created in 1960s, blending traditional Sundanese movements with modern influences.',
      audioAvailable: true,
      difficulty: 'Advanced'
    },
    {
      id: 'wayang-golek',
      title: 'Wayang Golek',
      titleSunda: 'Wayang Golek',
      type: 'tradition',
      description: 'Traditional wooden puppet theater performing stories from Ramayana, Mahabharata, and local legends with dalang narration.',
      audioAvailable: true,
      difficulty: 'Advanced'
    },
    {
      id: 'sisingaan',
      title: 'Sisingaan Dance',
      titleSunda: 'Tari Sisingaan',
      type: 'tradition',
      description: 'Lion dance performed during circumcision ceremonies and festivals, featuring acrobatic movements and colorful lion costumes.',
      audioAvailable: true,
      difficulty: 'Intermediate'
    },
    {
      id: 'kuda-lumping',
      title: 'Kuda Lumping',
      titleSunda: 'Kuda Lumping',
      type: 'tradition',
      description: 'Trance dance featuring bamboo horse puppets, combining spiritual elements with entertainment.',
      audioAvailable: true,
      difficulty: 'Advanced'
    },

    // Traditional Food & Culinary
    {
      id: 'nasi-timbel',
      title: 'Nasi Timbel',
      titleSunda: 'Nasi Timbel',
      type: 'tradition',
      description: 'Iconic Sundanese rice dish wrapped in banana leaves, served with fried chicken, vegetables, and sambal.',
      audioAvailable: false,
      difficulty: 'Beginner'
    },
    {
      id: 'gado-gado-sunda',
      title: 'Lotek Sunda',
      titleSunda: 'Lotek Sunda',
      type: 'tradition',
      description: 'Traditional vegetable salad with peanut sauce, showcasing fresh local ingredients and healthy Sundanese cuisine.',
      audioAvailable: false,
      difficulty: 'Beginner'
    },
    {
      id: 'karedok',
      title: 'Karedok',
      titleSunda: 'Karedok',
      type: 'tradition',
      description: 'Fresh raw vegetable salad with spicy peanut dressing, representing Sundanese love for fresh, healthy food.',
      audioAvailable: false,
      difficulty: 'Beginner'
    },

    // Landmarks & Places
    {
      id: 'gedung-sate',
      title: 'Gedung Sate',
      titleSunda: 'Gedung Sate',
      type: 'landmark',
      description: 'Iconic Art Deco government building in Bandung, symbol of West Java with distinctive tower resembling satay skewer.',
      audioAvailable: false,
      difficulty: 'Beginner'
    },
    {
      id: 'tangkuban-perahu',
      title: 'Tangkuban Perahu',
      titleSunda: 'Tangkuban Parahu',
      type: 'landmark',
      description: 'Active volcano north of Bandung shaped like an overturned boat, central to Sangkuriang legend.',
      audioAvailable: false,
      difficulty: 'Intermediate'
    },
    {
      id: 'kawah-putih',
      title: 'Kawah Putih',
      titleSunda: 'Kawah Bodas',
      type: 'landmark',
      description: 'Stunning white crater lake in Ciwidey with surreal milky turquoise waters from sulfur minerals.',
      audioAvailable: false,
      difficulty: 'Intermediate'
    },
    {
      id: 'keraton-kasepuhan',
      title: 'Keraton Kasepuhan',
      titleSunda: 'Karaton Kasepuhan',
      type: 'landmark',
      description: 'Historic palace in Cirebon showcasing Sundanese-Javanese-Islamic architecture and royal heritage.',
      audioAvailable: false,
      difficulty: 'Advanced'
    },

    // Festivals & Ceremonies
    {
      id: 'seren-taun',
      title: 'Seren Taun Festival',
      titleSunda: 'Upacara Seren Taun',
      type: 'tradition',
      description: 'Sacred harvest festival by Sundanese Baduy people, giving thanks to Dewi Sri (rice goddess) for abundant harvest.',
      audioAvailable: false,
      difficulty: 'Advanced'
    },
    {
      id: 'ngalaksa',
      title: 'Ngalaksa Tradition',
      titleSunda: 'Tradisi Ngalaksa',
      type: 'tradition',
      description: 'Traditional ceremony for preparing laksa noodles, bringing community together through food preparation rituals.',
      audioAvailable: false,
      difficulty: 'Intermediate'
    },
    {
      id: 'mapag-sri',
      title: 'Mapag Sri',
      titleSunda: 'Mapag Sri',
      type: 'tradition',
      description: 'Rice planting ceremony honoring Dewi Sri, featuring traditional dances, prayers, and community participation.',
      audioAvailable: false,
      difficulty: 'Advanced'
    },

    // Traditional Crafts & Arts
    {
      id: 'batik-mega-mendung',
      title: 'Batik Mega Mendung',
      titleSunda: 'Batik Mega Mendung',
      type: 'tradition',
      description: 'Distinctive Cirebon batik pattern featuring cloud motifs (mega mendung) in bold blue and red colors.',
      audioAvailable: false,
      difficulty: 'Intermediate'
    },
    {
      id: 'anyaman-bambu',
      title: 'Bamboo Weaving',
      titleSunda: 'Anyaman Awi',
      type: 'tradition',
      description: 'Traditional bamboo craft creating baskets, containers, and decorative items using time-honored techniques.',
      audioAvailable: false,
      difficulty: 'Intermediate'
    },
    {
      id: 'keris-sunda',
      title: 'Sundanese Keris',
      titleSunda: 'Keris Sunda',
      type: 'tradition',
      description: 'Traditional ceremonial dagger with spiritual significance, featuring distinctive Sundanese forging techniques.',
      audioAvailable: false,
      difficulty: 'Advanced'
    },

    // Language & Literature
    {
      id: 'pantun-sunda',
      title: 'Sundanese Pantun',
      titleSunda: 'Pantun Sunda',
      type: 'tradition',
      description: 'Traditional four-line poetry with ABAB rhyme scheme, expressing wisdom, humor, and cultural values.',
      audioAvailable: true,
      difficulty: 'Advanced'
    },
    {
      id: 'sisindiran',
      title: 'Sisindiran',
      titleSunda: 'Sisindiran',
      type: 'tradition',
      description: 'Sophisticated Sundanese poetry form using metaphor and allegory to convey deeper meanings and social commentary.',
      audioAvailable: true,
      difficulty: 'Advanced'
    },
    {
      id: 'wawangsalan',
      title: 'Wawangsalan',
      titleSunda: 'Wawangsalan',
      type: 'tradition',
      description: 'Sundanese riddle poetry that challenges listeners to decode hidden meanings through wordplay and cultural references.',
      audioAvailable: true,
      difficulty: 'Advanced'
    }
  ];

  const getDifficultyColor = (difficulty: string) => {
    switch (difficulty) {
      case 'beginner': return 'text-green-600 bg-green-100';
      case 'intermediate': return 'text-yellow-600 bg-yellow-100';
      case 'advanced': return 'text-red-600 bg-red-100';
      default: return 'text-gray-600 bg-gray-100';
    }
  };

  const getCategoryIcon = (category: string) => {
    switch (category) {
      case 'language': return <BookOpen className="h-4 w-4" />;
      case 'culture': return <Users className="h-4 w-4" />;
      case 'arts': return <Music className="h-4 w-4" />;
      case 'history': return <MapPin className="h-4 w-4" />;
      default: return <BookOpen className="h-4 w-4" />;
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-sky-50 via-emerald-50 to-slate-50">
      {/* Lesson Viewer Modal */}
      {selectedLesson && (
        <div className="fixed inset-0 z-50 bg-white overflow-y-auto">
          <LessonViewer 
            lesson={selectedLesson} 
            onBack={() => setSelectedLesson(null)}
            onComplete={() => {
              setCompletedLessons(prev => new Set([...prev, selectedLesson.id]));
              setSelectedLesson(null);
            }}
            onNext={() => {
              // Handle next lesson logic here
              setSelectedLesson(null);
            }}
          />
        </div>
      )}

      {/* Hero Header */}
      <div className="bg-gradient-to-r from-slate-700 via-teal-700 to-emerald-700 text-white relative overflow-hidden">
        {/* Traditional Sundanese Cloud Pattern Background */}
        <div 
          className="absolute inset-0 opacity-3"
          style={{
            backgroundImage: `url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' stroke='white' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M10 30c5-8 15-8 20 0 5 8 15 8 20 0 5-8 15-8 20 0 5 8 15 8 20 0'/%3E%3Cpath d='M15 45c3-5 10-5 13 0 3 5 10 5 13 0 3-5 10-5 13 0 3 5 10 5 13 0 3-5 10-5 13 0'/%3E%3Cpath d='M20 60c4-6 12-6 16 0 4 6 12 6 16 0 4-6 12-6 16 0 4 6 12 6 16 0'/%3E%3Cpath d='M5 15c6-4 14-4 20 0 6 4 14 4 20 0 6-4 14-4 20 0 6 4 14 4 20 0'/%3E%3Cpath d='M25 75c2-3 8-3 10 0 2 3 8 3 10 0 2-3 8-3 10 0 2 3 8 3 10 0 2-3 8-3 10 0'/%3E%3Cpath d='M8 85c7-5 16-5 23 0 7 5 16 5 23 0 7-5 16-5 23 0'/%3E%3C/g%3E%3C/svg%3E")`
          }}
        ></div>
        
        {/* Secondary Pattern Layer for Depth */}
        <div 
          className="absolute inset-0 opacity-2 transform translate-x-12 translate-y-8"
          style={{
            backgroundImage: `url("data:image/svg+xml,%3Csvg width='120' height='120' viewBox='0 0 120 120' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' stroke='white' stroke-width='1' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M20 40c8-10 20-10 28 0 8 10 20 10 28 0 8-10 20-10 28 0'/%3E%3Cpath d='M25 65c5-7 15-7 20 0 5 7 15 7 20 0 5-7 15-7 20 0 5 7 15 7 20 0'/%3E%3Cpath d='M15 90c6-8 18-8 24 0 6 8 18 8 24 0 6-8 18-8 24 0'/%3E%3Cpath d='M10 20c9-6 21-6 30 0 9 6 21 6 30 0 9-6 21-6 30 0'/%3E%3C/g%3E%3C/svg%3E")`
          }}
        ></div>
        
        {/* Existing Background Pattern */}
        <div className="absolute inset-0 opacity-10">
          <div className="absolute top-10 left-10 w-32 h-32 border-2 border-white rounded-full"></div>
          <div className="absolute bottom-20 right-20 w-24 h-24 border-2 border-white rounded-full"></div>
          <div className="absolute top-1/2 left-1/4 w-16 h-16 border border-white rounded-full"></div>
        </div>
        
        <div className="max-w-7xl mx-auto px-4 py-16 relative z-10">
          <div className="text-center">
            <div className="flex items-center justify-center gap-3 mb-6">
              <Mountain className="h-10 w-10 animate-pulse text-white drop-shadow-lg" />
              <h1 className="text-5xl font-bold text-white drop-shadow-2xl">
                Puseur Diajar Basa Sunda
              </h1>
              <Mountain className="h-10 w-10 animate-pulse text-white drop-shadow-lg" />
            </div>
            <h2 className="text-3xl font-semibold text-white mb-6 drop-shadow-lg">Complete Sundanese Learning Experience</h2>
            <p className="text-xl text-blue-100 max-w-4xl mx-auto mb-8 drop-shadow-md leading-relaxed">
              �️ Welcome to the most comprehensive Sundanese learning platform! Master the beautiful language of West Java 
              through interactive lessons, cultural immersion, traditional music, poetry, and authentic experiences. 
              From the mountains and seas of West Java to your heart - your complete journey awaits!
            </p>
            
            {/* Key Stats */}
            <div className="grid grid-cols-2 md:grid-cols-5 gap-6 mt-8 text-blue-100">
              <div className="text-center">
                <div className="text-3xl font-bold text-white drop-shadow-lg">150+</div>
                <div className="text-sm drop-shadow-md">Interactive Lessons</div>
              </div>
              <div className="text-center">
                <div className="text-3xl font-bold text-white drop-shadow-lg">500+</div>
                <div className="text-sm drop-shadow-md">Vocabulary Words</div>
              </div>
              <div className="text-center">
                <div className="text-3xl font-bold text-white drop-shadow-lg">50+</div>
                <div className="text-sm drop-shadow-md">Cultural Stories</div>
              </div>
              <div className="text-center">
                <div className="text-3xl font-bold text-white drop-shadow-lg">25+</div>
                <div className="text-sm drop-shadow-md">Traditional Songs</div>
              </div>
              <div className="text-center">
                <div className="text-3xl font-bold text-white drop-shadow-lg">100+</div>
                <div className="text-sm drop-shadow-md">Audio Recordings</div>
              </div>
            </div>

            {/* Quick Action Buttons */}
            <div className="flex flex-wrap justify-center gap-4 mt-8">
              <button className="px-6 py-3 bg-white text-slate-700 rounded-lg font-semibold hover:bg-sky-50 transition-all duration-300 transform hover:scale-105 shadow-lg">
                🎯 Start Learning Now
              </button>
              <button className="px-6 py-3 bg-teal-600 bg-opacity-20 border-2 border-white text-white rounded-lg font-semibold hover:bg-opacity-30 transition-all duration-300">
                📖 Take Level Test
              </button>
              <button className="px-6 py-3 bg-emerald-600 bg-opacity-20 border-2 border-white text-white rounded-lg font-semibold hover:bg-opacity-30 transition-all duration-300">
                🎵 Listen to Music
              </button>
            </div>
          </div>
        </div>
      </div>

      {/* Navigation Tabs */}
      <div className="bg-white border-b border-teal-200 shadow-lg sticky top-0 z-10">
        <div className="max-w-7xl mx-auto px-4">
          <div className="flex space-x-8">
            {[
              { id: 'overview', label: 'Dashboard', sunda: 'Dasbor', icon: <Star className="h-4 w-4" /> },
              { id: 'modules', label: 'Learning Modules', sunda: 'Modul Diajar', icon: <BookOpen className="h-4 w-4" /> },
              { id: 'culture', label: 'Cultural Treasures', sunda: 'Khazanah Budaya', icon: <Heart className="h-4 w-4" /> },
              { id: 'media', label: 'Audio & Video', sunda: 'Audio & Video', icon: <Video className="h-4 w-4" /> },
              { id: 'practice', label: 'Practice Tools', sunda: 'Alat Latihan', icon: <Mic className="h-4 w-4" /> },
              { id: 'dictionary', label: 'Dictionary', sunda: 'Kamus', icon: <FileText className="h-4 w-4" /> }
            ].map((tab) => (
              <button
                key={tab.id}
                onClick={() => setActiveTab(tab.id as 'overview' | 'modules' | 'culture' | 'media' | 'practice' | 'dictionary')}
                className={`py-4 px-3 border-b-2 font-medium text-sm transition-colors ${
                  activeTab === tab.id
                    ? 'border-teal-600 text-teal-700'
                    : 'border-transparent text-gray-500 hover:text-gray-700'
                }`}
              >
                <div className="text-center">
                  <div className="flex items-center justify-center gap-2 mb-1">
                    {tab.icon}
                    <span>{tab.label}</span>
                  </div>
                  <div className="text-xs text-teal-600">{tab.sunda}</div>
                </div>
              </button>
            ))}
          </div>
        </div>
      </div>

      {/* Content */}
      <div className="max-w-7xl mx-auto px-4 py-8">
        {activeTab === 'overview' && (
          <div className="space-y-8">
            {/* Personal Progress Dashboard */}
            <div className="bg-gradient-to-r from-slate-600 to-teal-600 rounded-2xl p-8 text-white shadow-xl">
              <div className="flex items-center justify-between mb-6">
                <div>
                  <h3 className="text-2xl font-bold mb-2">Wilujeng Sumping! Welcome Back! 👋</h3> �️</h3>
                  <p className="text-sky-100">Continue your beautiful Sundanese learning journey</p>
                </div>
                <div className="text-right">
                  <div className="text-3xl font-bold">Level 3</div>
                  <div className="text-sky-200">Intermediate</div>
                </div>
              </div>
              
              <div className="grid md:grid-cols-4 gap-6">
                <div className="bg-white bg-opacity-20 rounded-xl p-4 text-center backdrop-blur-sm">
                  <div className="text-3xl font-bold">127</div>
                  <div className="text-sm text-sky-200">Words Mastered</div>
                  <div className="text-xs text-sky-300">Kecap nu dikawasa</div>
                </div>
                <div className="bg-white bg-opacity-20 rounded-xl p-4 text-center backdrop-blur-sm">
                  <div className="text-3xl font-bold">23</div>
                  <div className="text-sm text-sky-200">Lessons Completed</div>
                  <div className="text-xs text-sky-300">Palajaran rampung</div>
                </div>
                <div className="bg-white bg-opacity-20 rounded-xl p-4 text-center backdrop-blur-sm">
                  <div className="text-3xl font-bold">12</div>
                  <div className="text-sm text-sky-200">Cultural Stories</div>
                  <div className="text-xs text-sky-300">Carita budaya</div>
                </div>
                <div className="bg-white bg-opacity-20 rounded-xl p-4 text-center backdrop-blur-sm">
                  <div className="text-3xl font-bold">15</div>
                  <div className="text-sm text-sky-200">Day Streak</div>
                  <div className="text-xs text-sky-300">Poé berturut-turut</div>
                </div>
              </div>

              <div className="mt-6 bg-white bg-opacity-20 rounded-xl p-4 backdrop-blur-sm">
                <div className="flex justify-between text-sm mb-2">
                  <span>Progress to Level 4</span>
                  <span>78%</span>
                </div>
                <div className="w-full bg-sky-300 bg-opacity-30 rounded-full h-3">
                  <div className="bg-white h-3 rounded-full transition-all duration-500" style={{ width: '78%' }}></div>
                </div>
              </div>
            </div>

            {/* Today's Learning Plan */}
            <div className="bg-white rounded-2xl p-8 shadow-xl border border-teal-100">
              <h3 className="text-2xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                <Calendar className="h-6 w-6 text-teal-600" />
                Today&apos;s Learning Plan
                <span className="text-lg text-teal-600 font-normal">Rencana Diajar Dinten Ayeuna</span>
              </h3>
              
              <div className="grid md:grid-cols-3 gap-6">
                {/* Daily Lesson */}
                <div className="bg-gradient-to-br from-slate-50 to-teal-50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer group border border-slate-200">
                  <div className="flex items-center gap-4 mb-4">
                    <div className="p-3 bg-slate-100 rounded-xl group-hover:bg-slate-200 transition-colors">
                      <BookOpen className="h-6 w-6 text-slate-600" />
                    </div>
                    <div>
                      <h4 className="font-semibold text-gray-900">Daily Lesson</h4>
                      <p className="text-sm text-slate-600">Palajaran Poean</p>
                    </div>
                  </div>
                  <p className="text-gray-600 text-sm mb-4">Learn about Sundanese traditional ceremonies and their cultural significance</p>
                  <div className="flex items-center justify-between">
                    <span className="text-xs text-gray-500">15 minutes</span>
                    <button className="px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors text-sm font-medium">
                      Continue →
                    </button>
                  </div>
                </div>

                {/* Vocabulary Practice */}
                <div className="bg-gradient-to-br from-teal-50 to-emerald-50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer group border border-teal-200">
                  <div className="flex items-center gap-4 mb-4">
                    <div className="p-3 bg-teal-100 rounded-xl group-hover:bg-teal-200 transition-colors">
                      <Zap className="h-6 w-6 text-teal-600" />
                    </div>
                    <div>
                      <h4 className="font-semibold text-gray-900">Vocabulary Drill</h4>
                      <p className="text-sm text-teal-600">Latihan Kosakata</p>
                    </div>
                  </div>
                  <p className="text-gray-600 text-sm mb-4">Practice 20 new words about family relationships in Sundanese culture</p>
                  <div className="flex items-center justify-between">
                    <span className="text-xs text-gray-500">10 minutes</span>
                    <button className="px-4 py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors text-sm font-medium">
                      Practice →
                    </button>
                  </div>
                </div>

                {/* Cultural Story */}
                <div className="bg-gradient-to-br from-emerald-50 to-sky-50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer group border border-emerald-200">
                  <div className="flex items-center gap-4 mb-4">
                    <div className="p-3 bg-emerald-100 rounded-xl group-hover:bg-emerald-200 transition-colors">
                      <Heart className="h-6 w-6 text-emerald-600" />
                    </div>
                    <div>
                      <h4 className="font-semibold text-gray-900">Cultural Story</h4>
                      <p className="text-sm text-emerald-600">Carita Budaya</p>
                    </div>
                  </div>
                  <p className="text-gray-600 text-sm mb-4">Listen to the legend of Lutung Kasarung with audio narration</p>
                  <div className="flex items-center justify-between">
                    <span className="text-xs text-gray-500">12 minutes</span>
                    <button className="px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors text-sm font-medium">
                      Listen →
                    </button>
                  </div>
                </div>
              </div>
            </div>

            {/* Learning Achievements */}
            <div className="grid md:grid-cols-2 gap-8">
              <div className="bg-white rounded-2xl p-6 shadow-xl border border-teal-100">
                <h4 className="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
                  <Trophy className="h-6 w-6 text-yellow-500" />
                  Recent Achievements
                </h4>
                <div className="space-y-3">
                  <div className="flex items-center gap-3 p-3 bg-slate-50 rounded-lg border border-slate-200">
                    <div className="p-2 bg-slate-100 rounded-lg">
                      <Star className="h-4 w-4 text-slate-600" />
                    </div>
                    <div>
                      <p className="font-medium text-gray-900">Sisindiran Master</p>
                      <p className="text-sm text-gray-600">Completed 10 traditional poetry lessons</p>
                    </div>
                  </div>
                  <div className="flex items-center gap-3 p-3 bg-teal-50 rounded-lg border border-teal-200">
                    <div className="p-2 bg-teal-100 rounded-lg">
                      <Music className="h-4 w-4 text-teal-600" />
                    </div>
                    <div>
                      <p className="font-medium text-gray-900">Music Enthusiast</p>
                      <p className="text-sm text-gray-600">Learned 5 traditional songs</p>
                    </div>
                  </div>
                  <div className="flex items-center gap-3 p-3 bg-emerald-50 rounded-lg border border-emerald-200">
                    <div className="p-2 bg-emerald-100 rounded-lg">
                      <Award className="h-4 w-4 text-emerald-600" />
                    </div>
                    <div>
                      <p className="font-medium text-gray-900">Cultural Explorer</p>
                      <p className="text-sm text-gray-600">Discovered 8 landmarks</p>
                    </div>
                  </div>
                </div>
              </div>

              <div className="bg-white rounded-2xl p-6 shadow-xl border border-teal-100">
                <h4 className="text-xl font-bold text-gray-900 mb-4 flex items-center gap-2">
                  <Bookmark className="h-6 w-6 text-teal-600" />
                  Quick Access
                </h4>
                <div className="grid grid-cols-2 gap-3">
                  <button className="p-4 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors text-left border border-slate-200">
                    <Volume2 className="h-6 w-6 text-slate-600 mb-2" />
                    <p className="font-medium text-gray-900">Pronunciation</p>
                    <p className="text-xs text-gray-600">Listen & repeat</p>
                  </button>
                  <button className="p-4 bg-teal-50 rounded-lg hover:bg-teal-100 transition-colors text-left border border-teal-200">
                    <FileText className="h-6 w-6 text-teal-600 mb-2" />
                    <p className="font-medium text-gray-900">Grammar</p>
                    <p className="text-xs text-gray-600">Rules & patterns</p>
                  </button>
                  <button className="p-4 bg-emerald-50 rounded-lg hover:bg-emerald-100 transition-colors text-left border border-emerald-200">
                    <Camera className="h-6 w-6 text-emerald-600 mb-2" />
                    <p className="font-medium text-gray-900">Virtual Tour</p>
                    <p className="text-xs text-gray-600">Explore places</p>
                  </button>
                  <button className="p-4 bg-sky-50 rounded-lg hover:bg-sky-100 transition-colors text-left border border-sky-200">
                    <Headphones className="h-6 w-6 text-sky-600 mb-2" />
                    <p className="font-medium text-gray-900">Audio Library</p>
                    <p className="text-xs text-gray-600">Songs & stories</p>
                  </button>
                </div>
              </div>
            </div>
          </div>
        )}

        {activeTab === 'modules' && (
          <div className="space-y-6">
            {!selectedModule ? (
              <>
                {/* Header with controls */}
                <div className="flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8">
                  <div>
                    <h3 className="text-2xl font-bold text-gray-900 mb-2">Learning Modules</h3>
                    <p className="text-gray-600">Structured learning path from basics to advanced Sundanese mastery</p>
                  </div>
                  
                  <div className="flex items-center gap-4">
                    {/* Search */}
                    <div className="relative">
                      <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4" />
                      <input
                        type="text"
                        placeholder="Search modules..."
                        className="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500 w-64"
                        value={searchQuery}
                        onChange={(e) => setSearchQuery(e.target.value)}
                      />
                    </div>
                    
                    {/* Filter */}
                    <select
                      className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-teal-500 focus:border-teal-500"
                      value={filterCategory}
                      onChange={(e) => setFilterCategory(e.target.value)}
                    >
                      <option value="all">All Categories</option>
                      <option value="language">Language</option>
                      <option value="culture">Culture</option>
                      <option value="arts">Arts</option>
                      <option value="history">History</option>
                    </select>
                    
                    {/* View Mode */}
                    <div className="flex bg-gray-100 rounded-lg p-1">
                      <button
                        onClick={() => setViewMode('grid')}
                        className={`p-2 rounded-md ${viewMode === 'grid' ? 'bg-white shadow-sm text-teal-600' : 'text-gray-500'}`}
                      >
                        <Grid className="h-4 w-4" />
                      </button>
                      <button
                        onClick={() => setViewMode('list')}
                        className={`p-2 rounded-md ${viewMode === 'list' ? 'bg-white shadow-sm text-teal-600' : 'text-gray-500'}`}
                      >
                        <List className="h-4 w-4" />
                      </button>
                    </div>
                  </div>
                </div>

                {/* Learning Path Overview */}
                <div className="bg-gradient-to-r from-slate-600 to-teal-600 rounded-2xl p-6 text-white mb-8">
                  <div className="flex items-center justify-between">
                    <div>
                      <h4 className="text-xl font-bold mb-2">🎯 Your Learning Journey</h4>
                      <p className="text-slate-100 mb-4">Complete modules in order to unlock advanced content</p>
                      <div className="flex items-center gap-4 text-sm">
                        <span>Progress: 3/6 modules started</span>
                        <span>•</span>
                        <span>Total time: ~25 hours</span>
                      </div>
                    </div>
                    <div className="hidden md:block">
                      <div className="text-right">
                        <div className="text-3xl font-bold">47%</div>
                        <div className="text-slate-200 text-sm">Overall Progress</div>
                      </div>
                    </div>
                  </div>
                </div>

                {/* Modules Grid/List */}
                <div className={viewMode === 'grid' ? 'grid md:grid-cols-2 gap-6' : 'space-y-4'}>
                  {learningModules
                    .filter(module => 
                      (filterCategory === 'all' || module.category === filterCategory) &&
                      (searchQuery === '' || module.title.toLowerCase().includes(searchQuery.toLowerCase()) || 
                       module.titleSunda.toLowerCase().includes(searchQuery.toLowerCase()))
                    )
                    .map((module) => (
                    <div 
                      key={module.id} 
                      className={`bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 cursor-pointer ${
                        module.isLocked ? 'opacity-60' : 'hover:scale-[1.02]'
                      }`}
                      onClick={() => !module.isLocked && setSelectedModule(module.id)}
                    >
                      {/* Module Header */}
                      <div className="flex items-start justify-between mb-4">
                        <div className="flex items-start gap-4 flex-1">
                          <div className={`p-3 rounded-lg ${module.isLocked ? 'bg-gray-100' : 'bg-teal-100'}`}>
                            {module.isLocked ? <Lock className="h-6 w-6 text-gray-400" /> : module.icon}
                          </div>
                          <div className="flex-1">
                            <div className="flex items-center gap-3 mb-2">
                              <h4 className="text-xl font-semibold text-gray-900">{module.title}</h4>
                              <span className={`px-2 py-1 text-xs rounded-full ${getDifficultyColor(module.difficulty)}`}>
                                {module.difficulty}
                              </span>
                            </div>
                            <p className="text-teal-600 font-medium mb-2">{module.titleSunda}</p>
                            <p className="text-gray-600 text-sm">{module.description}</p>
                          </div>
                        </div>
                      </div>

                      {/* Module Stats */}
                      <div className="grid grid-cols-3 gap-4 mb-4 text-sm">
                        <div className="text-center p-3 bg-slate-50 rounded-lg">
                          <div className="font-semibold text-gray-900">{module.lessons}</div>
                          <div className="text-gray-500">Lessons</div>
                        </div>
                        <div className="text-center p-3 bg-teal-50 rounded-lg">
                          <div className="font-semibold text-gray-900">{module.estimatedTime}</div>
                          <div className="text-gray-500">Duration</div>
                        </div>
                        <div className="text-center p-3 bg-emerald-50 rounded-lg">
                          <div className="font-semibold text-gray-900">{module.progress}%</div>
                          <div className="text-gray-500">Complete</div>
                        </div>
                      </div>

                      {/* Progress Bar */}
                      <div className="mb-4">
                        <div className="flex justify-between text-sm text-gray-600 mb-1">
                          <span>Progress</span>
                          <span>{module.progress}%</span>
                        </div>
                        <div className="w-full bg-gray-200 rounded-full h-2">
                          <div 
                            className={`h-2 rounded-full transition-all duration-300 ${
                              module.isLocked ? 'bg-gray-400' : 'bg-teal-600'
                            }`}
                            style={{ width: `${module.progress}%` }}
                          ></div>
                        </div>
                      </div>

                      {/* Prerequisites */}
                      {module.prerequisites && module.prerequisites.length > 0 && (
                        <div className="mb-4">
                          <p className="text-xs text-gray-500 mb-2">Prerequisites:</p>
                          <div className="flex flex-wrap gap-1">
                            {module.prerequisites.map(prereq => (
                              <span key={prereq} className="px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs">
                                {learningModules.find(m => m.id === prereq)?.title}
                              </span>
                            ))}
                          </div>
                        </div>
                      )}

                      {/* Action Button */}
                      <div className="flex justify-between items-center">
                        <div className="flex items-center gap-1 text-gray-500">
                          {getCategoryIcon(module.category)}
                          <span className="text-xs capitalize">{module.category}</span>
                        </div>
                        <button 
                          className={`px-4 py-2 rounded-lg font-medium transition-colors flex items-center gap-2 ${
                            module.isLocked 
                              ? 'bg-gray-200 text-gray-500 cursor-not-allowed' 
                              : 'bg-teal-600 text-white hover:bg-teal-700'
                          }`}
                          disabled={module.isLocked}
                        >
                          {module.isLocked ? (
                            <>
                              <Lock className="h-4 w-4" />
                              Locked
                            </>
                          ) : module.progress > 0 ? (
                            <>
                              Continue
                              <ChevronRight className="h-4 w-4" />
                            </>
                          ) : (
                            <>
                              Start
                              <Play className="h-4 w-4" />
                            </>
                          )}
                        </button>
                      </div>
                    </div>
                  ))}
                </div>
              </>
            ) : (
              /* Module Detail View */
              <ModuleDetailView 
                module={learningModules.find(m => m.id === selectedModule)!}
                lessons={sampleLessons[selectedModule] || []}
                onBack={() => setSelectedModule(null)}
                onLessonSelect={setSelectedLesson}
              />
            )}
          </div>
        )}

        {activeTab === 'culture' && (
          <div className="space-y-6">
            {/* Header */}
            <div className="text-center mb-8">
              <h3 className="text-2xl font-bold text-gray-900 mb-2">Cultural Treasures</h3>
              <p className="text-gray-600 mb-6">Discover the rich heritage of Sundanese culture through interactive exploration</p>
              
              {/* Cultural Statistics */}
              <div className="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-2xl mx-auto">
                <div className="bg-emerald-50 p-4 rounded-lg border border-emerald-200">
                  <div className="text-2xl font-bold text-emerald-600">{culturalHighlights.filter(item => item.type === 'instrument').length}</div>
                  <div className="text-sm text-emerald-700">Musical Instruments</div>
                </div>
                <div className="bg-sky-50 p-4 rounded-lg border border-sky-200">
                  <div className="text-2xl font-bold text-sky-600">{culturalHighlights.filter(item => item.type === 'song').length}</div>
                  <div className="text-sm text-sky-700">Traditional Songs</div>
                </div>
                <div className="bg-slate-50 p-4 rounded-lg border border-slate-200">
                  <div className="text-2xl font-bold text-slate-600">{culturalHighlights.filter(item => item.type === 'story').length}</div>
                  <div className="text-sm text-slate-700">Epic Legends</div>
                </div>
                <div className="bg-amber-50 p-4 rounded-lg border border-amber-200">
                  <div className="text-2xl font-bold text-amber-600">{culturalHighlights.filter(item => item.type === 'tradition').length}</div>
                  <div className="text-sm text-amber-700">Living Traditions</div>
                </div>
              </div>
            </div>

            {/* Featured Cultural Highlight */}
            <div className="bg-gradient-to-r from-slate-600 to-teal-600 rounded-2xl p-8 text-white mb-8">
              <div className="flex items-center justify-between">
                <div>
                  <h4 className="text-2xl font-bold mb-2">� Featured: Wayang Golek Tradition</h4>
                  <p className="text-slate-100 mb-2">Explore the ancient art of Sundanese wooden puppet theater</p>
                  <p className="text-slate-200 text-sm mb-4">Experience epic stories of Ramayana and Mahabharata through masterful dalang narration, traditional music, and intricate wooden puppets that bring legends to life.</p>
                  <div className="flex items-center gap-4">
                    <button className="px-6 py-3 bg-white text-teal-600 rounded-lg font-semibold hover:bg-slate-50 transition-colors flex items-center gap-2">
                      <Play className="h-5 w-5" />
                      Watch Performance
                    </button>
                    <button className="px-6 py-3 bg-emerald-600 bg-opacity-20 border border-white text-white rounded-lg font-semibold hover:bg-opacity-30 transition-colors flex items-center gap-2">
                      <Bookmark className="h-5 w-5" />
                      Save to Library
                    </button>
                    <button className="px-4 py-3 bg-teal-600 bg-opacity-20 border border-white text-white rounded-lg hover:bg-opacity-30 transition-colors flex items-center gap-2">
                      <Volume2 className="h-4 w-4" />
                      Listen to Dalang
                    </button>
                  </div>
                </div>
                <div className="hidden md:block">
                  <div className="w-32 h-32 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center">
                    <Users className="h-16 w-16" />
                  </div>
                </div>
              </div>
            </div>

            {/* Category Filters */}
            <div className="flex flex-wrap gap-3 mb-6">
              {[
                'All', 
                'Instruments', 
                'Songs', 
                'Stories', 
                'Landmarks', 
                'Traditions',
                'Dance',
                'Food',
                'Crafts',
                'Literature'
              ].map((category) => (
                <button
                  key={category}
                  className={`px-4 py-2 rounded-lg font-medium transition-colors ${
                    filterCategory === category.toLowerCase() || (category === 'All' && filterCategory === 'all')
                      ? 'bg-teal-600 text-white'
                      : 'bg-white border border-gray-300 text-gray-700 hover:bg-gray-50'
                  }`}
                  onClick={() => setFilterCategory(category === 'All' ? 'all' : category.toLowerCase())}
                >
                  {category}
                </button>
              ))}
            </div>

            {/* Cultural Items Grid */}
            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
              {culturalHighlights
                .filter(item => {
                  if (filterCategory === 'all') return true;
                  
                  const categoryMap: Record<string, string[]> = {
                    'instruments': ['instrument'],
                    'songs': ['song'],
                    'stories': ['story'],
                    'landmarks': ['landmark'],
                    'traditions': ['tradition'],
                    'dance': ['tradition'], // Dance is a type of tradition
                    'food': ['tradition'], // Food traditions
                    'crafts': ['tradition'], // Traditional crafts
                    'literature': ['tradition'] // Literary traditions
                  };
                  
                  const allowedTypes = categoryMap[filterCategory] || [];
                  
                  // Special handling for subcategories
                  if (filterCategory === 'dance') {
                    return item.type === 'tradition' && (
                      item.title.toLowerCase().includes('dance') || 
                      item.title.toLowerCase().includes('tari') ||
                      item.title.toLowerCase().includes('jaipong') ||
                      item.title.toLowerCase().includes('sisingaan') ||
                      item.title.toLowerCase().includes('wayang') ||
                      item.title.toLowerCase().includes('kuda')
                    );
                  }
                  
                  if (filterCategory === 'food') {
                    return item.type === 'tradition' && (
                      item.title.toLowerCase().includes('nasi') ||
                      item.title.toLowerCase().includes('lotek') ||
                      item.title.toLowerCase().includes('karedok') ||
                      item.title.toLowerCase().includes('ngalaksa')
                    );
                  }
                  
                  if (filterCategory === 'crafts') {
                    return item.type === 'tradition' && (
                      item.title.toLowerCase().includes('batik') ||
                      item.title.toLowerCase().includes('bamboo') ||
                      item.title.toLowerCase().includes('anyaman') ||
                      item.title.toLowerCase().includes('keris')
                    );
                  }
                  
                  if (filterCategory === 'literature') {
                    return item.type === 'tradition' && (
                      item.title.toLowerCase().includes('pantun') ||
                      item.title.toLowerCase().includes('sisindiran') ||
                      item.title.toLowerCase().includes('wawangsalan')
                    );
                  }
                  
                  return allowedTypes.includes(item.type);
                })
                .map((item) => (
                <div key={item.id} className="bg-white rounded-xl p-6 shadow-lg hover:shadow-xl transition-all duration-300 group">
                  {/* Item Header */}
                  <div className="flex justify-between items-start mb-4">
                    <div>
                      <h4 className="text-lg font-semibold text-gray-900 group-hover:text-teal-600 transition-colors">{item.title}</h4>
                      <p className="text-teal-600 font-medium">{item.titleSunda}</p>
                    </div>
                    <div className="flex items-center gap-2">
                      <span className={`px-2 py-1 text-xs rounded-full ${getDifficultyColor(item.difficulty.toLowerCase())}`}>
                        {item.difficulty}
                      </span>
                      <button className="p-2 bg-gray-100 rounded-lg hover:bg-teal-100 transition-colors group">
                        <Heart className="h-4 w-4 text-gray-400 group-hover:text-teal-600" />
                      </button>
                    </div>
                  </div>
                  
                  {/* Type Badge */}
                  <div className="mb-3">
                    <span className={`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium ${
                      item.type === 'instrument' ? 'bg-emerald-100 text-emerald-700' :
                      item.type === 'song' ? 'bg-sky-100 text-sky-700' :
                      item.type === 'story' ? 'bg-slate-100 text-slate-700' :
                      item.type === 'landmark' ? 'bg-teal-100 text-teal-700' :
                      'bg-amber-100 text-amber-700'
                    }`}>
                      {item.type === 'instrument' && <Music className="h-4 w-4" />}
                      {item.type === 'song' && <Volume2 className="h-4 w-4" />}
                      {item.type === 'story' && <BookOpen className="h-4 w-4" />}
                      {item.type === 'landmark' && <MapPin className="h-4 w-4" />}
                      {item.type === 'tradition' && <Users className="h-4 w-4" />}
                      {item.type.charAt(0).toUpperCase() + item.type.slice(1)}
                    </span>
                  </div>
                  
                  <p className="text-gray-600 mb-4 text-sm leading-relaxed">{item.description}</p>
                  
                  {/* Audio Sample Info */}
                  {item.audioSample && (
                    <div className="bg-gradient-to-r from-emerald-50 to-sky-50 rounded-lg p-3 mb-4 border border-emerald-200">
                      <div className="flex items-start gap-2">
                        <Headphones className="h-4 w-4 text-emerald-600 mt-0.5 flex-shrink-0" />
                        <div>
                          <p className="text-sm font-medium text-emerald-800">{item.audioSample.name}</p>
                          <p className="text-xs text-emerald-600">{item.audioSample.description} • {item.audioSample.duration}</p>
                        </div>
                      </div>
                    </div>
                  )}
                  
                  {/* Interactive Elements */}
                  <div className="space-y-3">
                    {/* Audio/Visual Actions */}
                    <div className="flex items-center justify-between">
                      <div className="flex gap-2">
                        {item.audioAvailable && (
                          <button 
                            className={`p-2 rounded-lg transition-colors group ${
                              currentlyPlaying === item.id
                                ? 'bg-emerald-200 text-emerald-800' 
                                : isAudioLoading && currentlyPlaying === item.id
                                  ? 'bg-yellow-100 text-yellow-600'
                                  : 'bg-emerald-100 text-emerald-600 hover:bg-emerald-200'
                            }`}
                            onClick={() => playRealAudio(item)}
                            title={item.audioSample ? `Play ${item.audioSample.name} (${item.audioSample.duration})` : "Play pronunciation"}
                            disabled={isAudioLoading && currentlyPlaying === item.id}
                          >
                            {isAudioLoading && currentlyPlaying === item.id ? (
                              <div className="h-4 w-4 border-2 border-yellow-600 border-t-transparent rounded-full animate-spin" />
                            ) : currentlyPlaying === item.id ? (
                              <Pause className="h-4 w-4" />
                            ) : (
                              <Volume2 className="h-4 w-4" />
                            )}
                          </button>
                        )}
                        <button className="p-2 bg-teal-100 text-teal-600 rounded-lg hover:bg-teal-200 transition-colors">
                          <Play className="h-4 w-4" />
                        </button>
                        <button className="p-2 bg-sky-100 text-sky-600 rounded-lg hover:bg-sky-200 transition-colors">
                          <Eye className="h-4 w-4" />
                        </button>
                      </div>
                      <button className="px-3 py-1 bg-slate-100 text-slate-600 rounded-lg hover:bg-slate-200 transition-colors text-sm">
                        Learn More
                      </button>
                    </div>

                    {/* Cultural Context */}
                    {item.type === 'instrument' && (
                      <div className="bg-emerald-50 p-3 rounded-lg border border-emerald-200">
                        <p className="text-xs text-emerald-700">
                          <strong>Cultural Note:</strong> Traditional instruments play a vital role in Sundanese ceremonies and daily life.
                        </p>
                      </div>
                    )}
                    
                    {item.type === 'story' && (
                      <div className="bg-slate-50 p-3 rounded-lg border border-slate-200">
                        <p className="text-xs text-slate-700">
                          <strong>Legend:</strong> This story has been passed down through generations and reflects Sundanese values.
                        </p>
                      </div>
                    )}

                    {/* Interactive Learning Options */}
                    <div className="flex gap-2 pt-2 border-t border-gray-100">
                      <button className="flex-1 py-2 bg-gradient-to-r from-teal-50 to-emerald-50 border border-teal-200 text-teal-700 rounded-lg hover:from-teal-100 hover:to-emerald-100 transition-all text-sm font-medium">
                        📚 Study
                      </button>
                      <button className="flex-1 py-2 bg-gradient-to-r from-slate-50 to-sky-50 border border-slate-200 text-slate-700 rounded-lg hover:from-slate-100 hover:to-sky-100 transition-all text-sm font-medium">
                        🎯 Practice
                      </button>
                    </div>
                  </div>
                </div>
              ))}
            </div>

            {/* Cultural Learning Path */}
            <div className="bg-white rounded-2xl p-8 shadow-xl border border-teal-100 mt-8">
              <h4 className="text-xl font-bold text-gray-900 mb-6 flex items-center gap-3">
                <Target className="h-6 w-6 text-teal-600" />
                Cultural Learning Journey
                <span className="text-sm font-normal text-gray-600">Jalur Budaya</span>
              </h4>
              
              <div className="grid md:grid-cols-3 gap-6">
                <div className="text-center p-6 bg-gradient-to-br from-slate-50 to-teal-50 rounded-xl border border-slate-200">
                  <div className="w-12 h-12 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <Music className="h-6 w-6 text-slate-600" />
                  </div>
                  <h5 className="font-semibold text-gray-900 mb-2">Musical Heritage</h5>
                  <p className="text-sm text-gray-600 mb-4">Explore traditional instruments and their cultural significance</p>
                  <div className="bg-slate-200 rounded-full h-2 mb-2">
                    <div className="bg-slate-600 h-2 rounded-full w-3/4"></div>
                  </div>
                  <span className="text-xs text-gray-500">75% explored</span>
                </div>
                
                <div className="text-center p-6 bg-gradient-to-br from-teal-50 to-emerald-50 rounded-xl border border-teal-200">
                  <div className="w-12 h-12 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <BookOpen className="h-6 w-6 text-teal-600" />
                  </div>
                  <h5 className="font-semibold text-gray-900 mb-2">Oral Traditions</h5>
                  <p className="text-sm text-gray-600 mb-4">Discover legends, stories, and their moral teachings</p>
                  <div className="bg-teal-200 rounded-full h-2 mb-2">
                    <div className="bg-teal-600 h-2 rounded-full w-1/2"></div>
                  </div>
                  <span className="text-xs text-gray-500">50% explored</span>
                </div>
                
                <div className="text-center p-6 bg-gradient-to-br from-emerald-50 to-sky-50 rounded-xl border border-emerald-200">
                  <div className="w-12 h-12 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-4">
                    <MapPin className="h-6 w-6 text-emerald-600" />
                  </div>
                  <h5 className="font-semibold text-gray-900 mb-2">Sacred Places</h5>
                  <p className="text-sm text-gray-600 mb-4">Visit virtual landmarks and historical sites</p>
                  <div className="bg-emerald-200 rounded-full h-2 mb-2">
                    <div className="bg-emerald-600 h-2 rounded-full w-1/4"></div>
                  </div>
                  <span className="text-xs text-gray-500">25% explored</span>
                </div>
              </div>
            </div>
          </div>
        )}

        {activeTab === 'media' && (
          <div className="space-y-6">
            <div className="text-center mb-8">
              <h3 className="text-2xl font-bold text-gray-900 mb-2">Audio & Video Library</h3>
              <p className="text-gray-600">Immerse yourself in authentic Sundanese sounds and visuals</p>
            </div>

            {/* Featured Content */}
            <div className="bg-gradient-to-r from-slate-600 to-teal-600 rounded-2xl p-8 text-white mb-8">
              <div className="flex items-center justify-between">
                <div>
                  <h4 className="text-2xl font-bold mb-2">🎵 Featured: Traditional Angklung Performance</h4>
                  <p className="text-slate-100 mb-4">Experience the UNESCO World Heritage bamboo orchestra</p>
                  <div className="flex items-center gap-4">
                    <button className="px-6 py-3 bg-white text-teal-600 rounded-lg font-semibold hover:bg-slate-50 transition-colors flex items-center gap-2">
                      <Play className="h-5 w-5" />
                      Watch Now
                    </button>
                    <button className="px-6 py-3 bg-slate-400 bg-opacity-30 border border-white text-white rounded-lg font-semibold hover:bg-opacity-40 transition-colors flex items-center gap-2">
                      <Download className="h-5 w-5" />
                      Download
                    </button>
                  </div>
                </div>
                <div className="hidden md:block">
                  <div className="w-32 h-32 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center">
                    <Video className="h-16 w-16" />
                  </div>
                </div>
              </div>
            </div>

            {/* Content Categories */}
            <div className="grid md:grid-cols-3 gap-6">
              {/* Traditional Music */}
              <div className="bg-white rounded-xl p-6 shadow-lg">
                <div className="flex items-center gap-3 mb-4">
                  <div className="p-3 bg-teal-100 rounded-lg">
                    <Music className="h-6 w-6 text-teal-600" />
                  </div>
                  <h4 className="text-lg font-semibold text-gray-900">Traditional Music</h4>
                </div>
                <div className="space-y-3">
                  {['Kacapi Suling', 'Angklung Melodies', 'Kendang Rhythms', 'Gamelan Degung'].map((item, idx) => (
                    <div key={idx} className="flex items-center justify-between p-3 bg-teal-50 rounded-lg hover:bg-teal-100 transition-colors cursor-pointer">
                      <span className="text-sm font-medium">{item}</span>
                      <Play className="h-4 w-4 text-teal-600" />
                    </div>
                  ))}
                </div>
              </div>

              {/* Pronunciation Guide */}
              <div className="bg-white rounded-xl p-6 shadow-lg">
                <div className="flex items-center gap-3 mb-4">
                  <div className="p-3 bg-emerald-100 rounded-lg">
                    <Volume2 className="h-6 w-6 text-emerald-600" />
                  </div>
                  <h4 className="text-lg font-semibold text-gray-900">Pronunciation</h4>
                </div>
                <div className="space-y-3">
                  {['Basic Greetings', 'Numbers & Counting', 'Family Terms', 'Daily Expressions'].map((item, idx) => (
                    <div key={idx} className="flex items-center justify-between p-3 bg-emerald-50 rounded-lg hover:bg-emerald-100 transition-colors cursor-pointer">
                      <span className="text-sm font-medium">{item}</span>
                      <Volume2 className="h-4 w-4 text-emerald-600" />
                    </div>
                  ))}
                </div>
              </div>

              {/* Cultural Videos */}
              <div className="bg-white rounded-xl p-6 shadow-lg">
                <div className="flex items-center gap-3 mb-4">
                  <div className="p-3 bg-sky-100 rounded-lg">
                    <Video className="h-6 w-6 text-sky-600" />
                  </div>
                  <h4 className="text-lg font-semibold text-gray-900">Cultural Videos</h4>
                </div>
                <div className="space-y-3">
                  {['Traditional Ceremonies', 'Cooking Tutorials', 'Dance Performances', 'Craft Making'].map((item, idx) => (
                    <div key={idx} className="flex items-center justify-between p-3 bg-sky-50 rounded-lg hover:bg-sky-100 transition-colors cursor-pointer">
                      <span className="text-sm font-medium">{item}</span>
                      <Video className="h-4 w-4 text-sky-600" />
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>
        )}

        {activeTab === 'practice' && (
          <div className="space-y-6">
            <div className="text-center mb-8">
              <h3 className="text-2xl font-bold text-gray-900 mb-2">Interactive Practice Tools</h3>
              <p className="text-gray-600">Master Sundanese through engaging exercises and games</p>
            </div>

            {/* Practice Categories */}
            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
              {/* Speaking Practice */}
              <div className="bg-gradient-to-br from-teal-50 to-emerald-50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer border border-teal-200">
                <div className="flex items-center gap-4 mb-4">
                  <div className="p-3 bg-teal-100 rounded-xl">
                    <Mic className="h-6 w-6 text-teal-600" />
                  </div>
                  <div>
                    <h4 className="font-semibold text-gray-900">Speaking Practice</h4>
                    <p className="text-sm text-teal-600">Latihan Nyarita</p>
                  </div>
                </div>
                <p className="text-gray-600 text-sm mb-4">Practice pronunciation with AI voice recognition and get instant feedback</p>
                <button className="w-full py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors">
                  Start Speaking
                </button>
              </div>

              {/* Vocabulary Games */}
              <div className="bg-gradient-to-br from-emerald-50 to-slate-50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer border border-emerald-200">
                <div className="flex items-center gap-4 mb-4">
                  <div className="p-3 bg-emerald-100 rounded-xl">
                    <Zap className="h-6 w-6 text-emerald-600" />
                  </div>
                  <div>
                    <h4 className="font-semibold text-gray-900">Vocabulary Games</h4>
                    <p className="text-sm text-emerald-600">Kaulinan Kosakata</p>
                  </div>
                </div>
                <p className="text-gray-600 text-sm mb-4">Fun matching games, flashcards, and memory challenges</p>
                <button className="w-full py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors">
                  Play Games
                </button>
              </div>

              {/* Writing Practice */}
              <div className="bg-gradient-to-br from-sky-50 to-teal-50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer border border-sky-200">
                <div className="flex items-center gap-4 mb-4">
                  <div className="p-3 bg-sky-100 rounded-xl">
                    <FileText className="h-6 w-6 text-sky-600" />
                  </div>
                  <div>
                    <h4 className="font-semibold text-gray-900">Writing Practice</h4>
                    <p className="text-sm text-sky-600">Latihan Nulis</p>
                  </div>
                </div>
                <p className="text-gray-600 text-sm mb-4">Learn to write Sundanese script and practice sentence construction</p>
                <button className="w-full py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700 transition-colors">
                  Start Writing
                </button>
              </div>

              {/* Conversation Simulator */}
              <div className="bg-gradient-to-br from-slate-50 to-emerald-50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer border border-slate-200">
                <div className="flex items-center gap-4 mb-4">
                  <div className="p-3 bg-slate-100 rounded-xl">
                    <Users className="h-6 w-6 text-slate-600" />
                  </div>
                  <div>
                    <h4 className="font-semibold text-gray-900">Conversation AI</h4>
                    <p className="text-sm text-slate-600">Obrolan AI</p>
                  </div>
                </div>
                <p className="text-gray-600 text-sm mb-4">Practice real conversations with AI in different scenarios</p>
                <button className="w-full py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors">
                  Start Chat
                </button>
              </div>

              {/* Cultural Quiz */}
              <div className="bg-gradient-to-br from-teal-50 to-sky-50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer border border-teal-200">
                <div className="flex items-center gap-4 mb-4">
                  <div className="p-3 bg-teal-100 rounded-xl">
                    <Trophy className="h-6 w-6 text-teal-600" />
                  </div>
                  <div>
                    <h4 className="font-semibold text-gray-900">Cultural Quiz</h4>
                    <p className="text-sm text-teal-600">Kuis Budaya</p>
                  </div>
                </div>
                <p className="text-gray-600 text-sm mb-4">Test your knowledge of Sundanese culture and traditions</p>
                <button className="w-full py-2 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors">
                  Take Quiz
                </button>
              </div>

              {/* Virtual Reality */}
              <div className="bg-gradient-to-br from-emerald-50 to-slate-50 rounded-xl p-6 hover:shadow-lg transition-all duration-300 cursor-pointer border border-emerald-200">
                <div className="flex items-center gap-4 mb-4">
                  <div className="p-3 bg-emerald-100 rounded-xl">
                    <Eye className="h-6 w-6 text-emerald-600" />
                  </div>
                  <div>
                    <h4 className="font-semibold text-gray-900">VR Experience</h4>
                    <p className="text-sm text-emerald-600">Pangalaman VR</p>
                  </div>
                </div>
                <p className="text-gray-600 text-sm mb-4">Immersive virtual tours of West Java landmarks and markets</p>
                <button className="w-full py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors">
                  Enter VR
                </button>
              </div>
            </div>
          </div>
        )}

        {activeTab === 'dictionary' && (
          <div className="space-y-6">
            <div className="text-center mb-8">
              <h3 className="text-2xl font-bold text-gray-900 mb-2">Comprehensive Sundanese Dictionary</h3>
              <p className="text-gray-600">Kamus Sunda Lengkap - Your complete language reference with cultural context</p>
            </div>

            {/* Enhanced Search */}
            <div className="bg-white rounded-2xl p-8 shadow-xl border border-teal-100">
              <div className="mb-6">
                <div className="relative">
                  <input
                    type="text"
                    placeholder="Search Sundanese or English words... / Paluruh kecap Sunda atawa Inggris..."
                    className="w-full px-6 py-4 border-2 border-teal-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 text-lg"
                  />
                  <button className="absolute right-4 top-1/2 transform -translate-y-1/2 text-teal-600 hover:text-teal-700">
                    <Volume2 className="h-6 w-6" />
                  </button>
                </div>
                <div className="flex flex-wrap gap-2 mt-4">
                  {['Greetings', 'Family', 'Food', 'Nature', 'Culture', 'Traditional Arts'].map((category) => (
                    <button key={category} className="px-4 py-2 bg-teal-100 text-teal-700 rounded-lg hover:bg-teal-200 transition-colors text-sm">
                      {category}
                    </button>
                  ))}
                </div>
              </div>

              <div className="grid gap-6">
                {/* Featured Word of the Day */}
                <div className="bg-gradient-to-r from-teal-100 to-emerald-100 rounded-xl p-6 border border-teal-200">
                  <div className="flex items-center gap-3 mb-4">
                    <Star className="h-6 w-6 text-teal-600" />
                    <h4 className="text-xl font-bold text-gray-900">Word of the Day - Kecap Poé Ieu</h4>
                  </div>
                  <div className="flex justify-between items-start mb-4">
                    <div>
                      <h5 className="text-2xl font-bold text-teal-900 mb-2">Someah</h5>
                      <p className="text-teal-700 text-lg">/so.me.ah/</p>
                    </div>
                    <button className="p-3 bg-teal-600 text-white rounded-lg hover:bg-teal-700 transition-colors">
                      <Volume2 className="h-5 w-5" />
                    </button>
                  </div>
                  <p className="text-gray-800 mb-4"><strong>Friendly, hospitable, welcoming</strong> - adjective describing the warm Sundanese character</p>
                  <div className="bg-white bg-opacity-70 p-4 rounded-lg">
                    <p className="text-sm text-gray-700">
                      <strong>Example:</strong> &quot;Urang Sunda téh someah ka sémah&quot; - Sundanese people are hospitable to guests
                    </p>
                    <p className="text-xs text-teal-600 mt-2">Cultural note: Someah reflects the core Sundanese value of warmth and hospitality</p>
                  </div>
                </div>

                {/* Dictionary Entries */}
                <div className="grid md:grid-cols-2 gap-4">
                  <div className="border-2 border-teal-200 rounded-xl p-6 hover:border-teal-300 transition-colors">
                    <div className="flex justify-between items-start mb-3">
                      <h4 className="text-lg font-semibold text-gray-900">Kumaha</h4>
                      <button className="text-teal-600 hover:text-teal-700 p-2 bg-teal-100 rounded-lg">
                        <Volume2 className="h-4 w-4" />
                      </button>
                    </div>
                    <p className="text-teal-600 mb-2">/ku.ma.ha/</p>
                    <p className="text-gray-700 mb-3"><strong>How</strong> - interrogative word</p>
                    <div className="bg-teal-50 p-3 rounded-lg">
                      <p className="text-sm text-gray-600 mb-2">
                        <strong>Example:</strong> &quot;Kumaha damang?&quot; - How are you?
                      </p>
                      <div className="flex gap-2">
                        <button className="text-xs px-2 py-1 bg-teal-200 text-teal-800 rounded">Save</button>
                        <button className="text-xs px-2 py-1 bg-emerald-200 text-emerald-800 rounded">Practice</button>
                      </div>
                    </div>
                  </div>

                  <div className="border-2 border-emerald-200 rounded-xl p-6 hover:border-emerald-300 transition-colors">
                    <div className="flex justify-between items-start mb-3">
                      <h4 className="text-lg font-semibold text-gray-900">Angklung</h4>
                      <button className="text-emerald-600 hover:text-emerald-700 p-2 bg-emerald-100 rounded-lg">
                        <Volume2 className="h-4 w-4" />
                      </button>
                    </div>
                    <p className="text-emerald-600 mb-2">/aŋ.kluŋ/</p>
                    <p className="text-gray-700 mb-3"><strong>Angklung</strong> - traditional bamboo musical instrument</p>
                    <div className="bg-emerald-50 p-3 rounded-lg">
                      <p className="text-sm text-gray-600 mb-2">
                        <strong>Cultural note:</strong> UNESCO World Heritage instrument played by shaking bamboo tubes
                      </p>
                      <div className="flex gap-2">
                        <button className="text-xs px-2 py-1 bg-emerald-200 text-emerald-800 rounded">Listen</button>
                        <button className="text-xs px-2 py-1 bg-teal-200 text-teal-800 rounded">Learn More</button>
                      </div>
                    </div>
                  </div>
                </div>

                {/* Quick Reference */}
                <div className="bg-gradient-to-r from-slate-50 to-teal-50 rounded-xl p-6 border border-slate-200">
                  <h4 className="text-lg font-bold text-gray-900 mb-4">Quick Reference - Rujukan Gancang</h4>
                  <div className="grid md:grid-cols-3 gap-4">
                    <div>
                      <h5 className="font-semibold text-teal-800 mb-2">Common Greetings</h5>
                      <ul className="text-sm space-y-1">
                        <li>Wilujeng enjing - Good morning</li>
                        <li>Kumaha damang? - How are you?</li>
                        <li>Hatur nuhun - Thank you</li>
                      </ul>
                    </div>
                    <div>
                      <h5 className="font-semibold text-emerald-800 mb-2">Family Terms</h5>
                      <ul className="text-sm space-y-1">
                        <li>Kolot - Parents</li>
                        <li>Adi - Younger sibling</li>
                        <li>Akang - Older brother</li>
                      </ul>
                    </div>
                    <div>
                      <h5 className="font-semibold text-sky-800 mb-2">Cultural Terms</h5>
                      <ul className="text-sm space-y-1">
                        <li>Gotong royong - Mutual help</li>
                        <li>Silih asah - Learning together</li>
                        <li>Someah - Hospitality</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}
